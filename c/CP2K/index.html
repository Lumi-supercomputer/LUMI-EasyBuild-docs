


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the LUMI software library">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>CP2K - LUMI Software Library</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
  
      

    

  
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      document.body.addEventListener("click", function(ev) {
        if (ev.target instanceof HTMLElement) {
          var el = ev.target.closest("a[href^=http]")
          if (el)
            ga("send", "event", "outbound", "click", el.href)
        }
      })
    })
  </script>

    

  
  
  
    
  

  
  

  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="LUMI Software Library - CP2K" />
  <meta property="og:description" content="Documentation for the LUMI software library" />
  <meta property="og:url" content="None" />
  <meta property="og:image" content="assets/images/banner.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1080" />
  <meta property="og:image:height" content="568" />

  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@LUMIhpc" />
  <meta name="twitter:creator" content="@LUMIhpc" />
  <meta name="twitter:title" content="LUMI Software Library - CP2K" />
  <meta name="twitter:description" content="Documentation for the LUMI software library" />
  <meta name="twitter:image" content="assets/images/banner.png" />

  <style>
    [data-md-color-primary="lumi"] {
      --md-primary-fg-color: hsla(0, 0%, 100%, 1);
      --md-primary-fg-color--light: hsla(0, 0%, 100%, 0.7);
      --md-primary-fg-color--dark: hsla(0, 0%, 0%, 0.07);
      --md-primary-bg-color: hsla(0, 0%, 0%, 0.87);
      --md-primary-bg-color--light: hsla(0, 0%, 0%, 0.54);
      --md-button-bg-color: hsla(207,100%,28%, 1);
      --md-button-bg-color--light: hsla(207,100%,38%, 1);
      --md-typeset-a-color: hsla(207,100%,28%, 1);
    }
    
    [data-md-color-accent="lumi"] {
      --md-accent-fg-color: hsla(0,0%,0%, 1);
      --md-accent-fg-color--transparent: hsla(0,0%,0%, 0.1);
      --md-accent-bg-color: hsla(0, 0%, 100%, 1);
      --md-accent-bg-color--light: hsla(0, 0%, 100%, 0.7);
    }
  </style>

  


  
  

    <link
      rel="stylesheet"
      href="../../assets/stylesheets/extra-a8af0af3d0.css"
    />
    <link
      rel="stylesheet"
      href="../../assets/stylesheets/overrides-5193e6f6df.css"
    />
    <link
      rel="stylesheet"
      id="typekit-fonts-css"
      href="https://use.typekit.net/nlo5lta.css?ver=5.5.3"
      type="text/css" media="all"
    />

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="lumi" data-md-color-accent="lumi">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cp2k" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LUMI Software Library" class="md-header__button md-logo" aria-label="LUMI Software Library" data-md-component="logo">
      
  
  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 723 212" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g id="Layer-2" serif:id="Layer 2">
        <g transform="matrix(1,0,0,1,0,175.883)">
            <path d="M0,-140.304L0,0L102.89,0L102.89,-24.599L26.658,-24.599L26.658,-140.304L0,-140.304Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,257.262,35.5793)">
            <path d="M0,140.304C-17.585,140.304 -32.083,135.347 -43.588,125.338C-55,115.423 -60.799,103.357 -60.799,89.14L-60.799,0L-34.328,0L-34.328,81.563C-34.328,92.413 -31.054,100.645 -24.319,105.976C-17.866,111.12 -9.728,113.74 0,113.74C9.728,113.74 17.865,111.12 24.319,105.976C31.054,100.645 34.328,92.413 34.328,81.563L34.328,0L60.799,0L60.799,89.14C60.799,103.357 55.093,115.329 43.588,125.338C32.083,135.347 17.585,140.304 0,140.304" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,550.374,119.668)">
            <path d="M0,-27.874L-43.588,20.671L-87.176,-27.874L-87.176,56.215L-113.74,56.215L-113.74,-84.089L-105.695,-84.089L-43.588,-13.47L18.614,-84.089L26.658,-84.089L26.658,56.215L0.094,56.215L0,-27.874Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <rect x="695.604" y="35.486" width="26.658" height="140.397" style="fill:rgb(29,29,27);"/>
        <g transform="matrix(-1,0,0,1,722.262,-203.194)">
            <rect x="0" y="203.194" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
        <g transform="matrix(-1,0,0,1,722.262,203.194)">
            <rect x="0" y="0" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
    </g>
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LUMI Software Library
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CP2K
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#a" class="md-tabs__link">
        
  
  
    
  
  a

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#b" class="md-tabs__link">
        
  
  
    
  
  b

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#c" class="md-tabs__link">
        
  
  
    
  
  c

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#d" class="md-tabs__link">
        
  
  
    
  
  d

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#e" class="md-tabs__link">
        
  
  
    
  
  e

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#f" class="md-tabs__link">
        
  
  
    
  
  f

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#g" class="md-tabs__link">
        
  
  
    
  
  g

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#h" class="md-tabs__link">
        
  
  
    
  
  h

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#I/ICU" class="md-tabs__link">
        
  
  
    
  
  I/ICU

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#i" class="md-tabs__link">
        
  
  
    
  
  i

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#j" class="md-tabs__link">
        
  
  
    
  
  j

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#k" class="md-tabs__link">
        
  
  
    
  
  k

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#l" class="md-tabs__link">
        
  
  
    
  
  l

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#m" class="md-tabs__link">
        
  
  
    
  
  m

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#n" class="md-tabs__link">
        
  
  
    
  
  n

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#o" class="md-tabs__link">
        
  
  
    
  
  o

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#p" class="md-tabs__link">
        
  
  
    
  
  p

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#q" class="md-tabs__link">
        
  
  
    
  
  q

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#r" class="md-tabs__link">
        
  
  
    
  
  r

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#s" class="md-tabs__link">
        
  
  
    
  
  s

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#t" class="md-tabs__link">
        
  
  
    
  
  t

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#u" class="md-tabs__link">
        
  
  
    
  
  u

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#v" class="md-tabs__link">
        
  
  
    
  
  v

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#w" class="md-tabs__link">
        
  
  
    
  
  w

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#x" class="md-tabs__link">
        
  
  
    
  
  x

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#y" class="md-tabs__link">
        
  
  
    
  
  y

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html#z" class="md-tabs__link">
        
  
  
    
  
  z

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../known_issues/" class="md-tabs__link">
        
  
  
    
  
  Issues

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../whats_new/" class="md-tabs__link">
        
  
  
    
  
  New

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LUMI Software Library" class="md-nav__button md-logo" aria-label="LUMI Software Library" data-md-component="logo">
      
  
  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 723 212" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g id="Layer-2" serif:id="Layer 2">
        <g transform="matrix(1,0,0,1,0,175.883)">
            <path d="M0,-140.304L0,0L102.89,0L102.89,-24.599L26.658,-24.599L26.658,-140.304L0,-140.304Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,257.262,35.5793)">
            <path d="M0,140.304C-17.585,140.304 -32.083,135.347 -43.588,125.338C-55,115.423 -60.799,103.357 -60.799,89.14L-60.799,0L-34.328,0L-34.328,81.563C-34.328,92.413 -31.054,100.645 -24.319,105.976C-17.866,111.12 -9.728,113.74 0,113.74C9.728,113.74 17.865,111.12 24.319,105.976C31.054,100.645 34.328,92.413 34.328,81.563L34.328,0L60.799,0L60.799,89.14C60.799,103.357 55.093,115.329 43.588,125.338C32.083,135.347 17.585,140.304 0,140.304" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(1,0,0,1,550.374,119.668)">
            <path d="M0,-27.874L-43.588,20.671L-87.176,-27.874L-87.176,56.215L-113.74,56.215L-113.74,-84.089L-105.695,-84.089L-43.588,-13.47L18.614,-84.089L26.658,-84.089L26.658,56.215L0.094,56.215L0,-27.874Z" style="fill:rgb(29,29,27);fill-rule:nonzero;"/>
        </g>
        <rect x="695.604" y="35.486" width="26.658" height="140.397" style="fill:rgb(29,29,27);"/>
        <g transform="matrix(-1,0,0,1,722.262,-203.194)">
            <rect x="0" y="203.194" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
        <g transform="matrix(-1,0,0,1,722.262,203.194)">
            <rect x="0" y="0" width="722.262" height="8.175" style="fill:rgb(29,29,27);"/>
        </g>
    </g>
</svg>

    </a>
    LUMI Software Library
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#a" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    a
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#b" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    b
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#c" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    c
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#d" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    d
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#e" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    e
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#f" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    f
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#g" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    g
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#h" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    h
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#I/ICU" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I/ICU
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#i" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    i
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#j" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    j
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#k" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    k
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#l" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    l
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#m" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    m
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#n" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    n
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#o" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    o
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#p" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    p
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#q" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    q
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#r" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    r
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#s" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    s
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#t" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    t
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#u" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    u
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#v" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    v
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#w" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    w
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#x" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    x
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#y" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    y
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html#z" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../known_issues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Issues
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../whats_new/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    New
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#license-information" class="md-nav__link">
    <span class="md-ellipsis">
      
        License information
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        User documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-cp2k" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing CP2K
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-batch-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example batch scripts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tuning recommendations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-installable-modules-and-easyconfigs" class="md-nav__link">
    <span class="md-ellipsis">
      
        User-installable modules (and EasyConfigs)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Technical documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Technical documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#easybuild" class="md-nav__link">
    <span class="md-ellipsis">
      
        EasyBuild
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EasyBuild">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#brief-descriptions-of-archived-easyconfigs-up-to-2309" class="md-nav__link">
    <span class="md-ellipsis">
      
        Brief descriptions of archived EasyConfigs (up to 23.09)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-20242-with-libcp2k" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version 2024.2 with libcp2k
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-20243-for-2503" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version 2024.3 for 25.03
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-20252-for-2503-gpu" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version 2025.2 for 25.03 GPU
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#archived-easyconfigs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Archived EasyConfigs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  
  




<p><a href="../../">[package list]</a></p>
<h1 id="cp2k">CP2K</h1>
<p><span class='lumi-software-button-userinstallable-hover'><span class='lumi-software-button-userinstallable'></span></span></p>
<h2 id="license-information">License information</h2>
<p>The source of CP2K is open and freely available for everybody under 
<a href="https://www.gnu.org/licenses/gpl-3.0.html#TOC1">the GPL license</a>.</p>
<p>(See also the <a href="https://github.com/cp2k/cp2k/blob/master/LICENSE">LICENSE file in the CP2K GitHub</a>.)</p>
<p>From LUMI/25.03 on, the LICENSE file can also be found in 
<code>$EBROOTCP2K/share/licenses/CP2K</code> after installing and loading the module.</p>
<h2 id="user-documentation">User documentation</h2>
<p><a href="https://www.cp2k.org/">CP2K</a> is a quantum chemistry and solid state
physics software package that can perform atomistic simulations of solid state,
liquid, molecular, periodic, material, crystal, and biological systems. In
general, it runs well on LUMI-C and several of the simulation methods such as
LS-DFT and RPA calculations can utilize the GPUs on LUMI-G with some speed-up.</p>
<h3 id="installing-cp2k">Installing CP2K</h3>
<p>We provide automatic installation scripts for several versions of CP2K. In
general, the installation procedure is described on the <a href="https://docs.lumi-supercomputer.eu/software/installing/easybuild/">EasyBuild
page</a>. 
For example, the step by step procedure for installing CP2K 2025.2 with ROCm 
support is:</p>
<ol>
<li>Load the LUMI software environment: <code>module load LUMI/25.03</code>.</li>
<li>Select the LUMI-G partition as we want to use a GPU version: <code>module load partition/G</code>.</li>
<li>Load the EasyBuild module: <code>module load EasyBuild-user</code>.</li>
</ol>
<p>Then you can run the install command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>eb<span class="w"> </span>-r<span class="w"> </span>CP2K-2025.2-cpeGNU-25.03-rocm.eb
</code></pre></div>
<p>The installation process is quite slow. It can take up to 1 hour to compile
everything, but afterwards, you will have a module called 
<code>CP2K/2025.2-cpeGNU-25.03-rocm</code> installed in your home directory. Load the 
module to use it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>CP2K/2025.2-cpeGNU-25.03-rocm
</code></pre></div>
<p>The  CP2K binary <code>cp2k.psmp</code> will now be in your
<code>PATH</code>. Launch CP2K via the 
<a href="https://docs.lumi-supercomputer.eu/runjobs/scheduled-jobs/slurm-quickstart/">Slurm scheduler</a>, 
e.g. <code>srun cp2k.psmp</code>. Please note that you must do <code>module load LUMI/25.03 partition/G</code> to
see the CP2K module in the module system. The same applies to the Slurm batch
scripts which you send to the compute nodes.</p>
<p>You can see other versions of CP2K that can be automatically installed in the
same way by running the EasyBuild command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>eb<span class="w"> </span>-S<span class="w"> </span>CP2K
</code></pre></div>
<p>or by checking the list further down this page 
or by checking the
<a href="https://github.com/Lumi-supercomputer/LUMI-EasyBuild-contrib/tree/main/easybuild/easyconfigs/c/CP2K">LUMI-EasyBuild-contrib</a>
repository on GitHub directly.</p>
<p>We build the CP2K executables with bindings to several external libraries
activated: currently COSMA, SpLA, SpFFT, spglib, HDF5, LibXSMM, LibXC, FFTW3,
Libvori and hipFFT+hipBLAS from ROCm. </p>
<h3 id="example-batch-scripts">Example batch scripts</h3>
<p>A typical CP2K batch job using 4 compute nodes on LUMI-C with 2 OpenMP thread
per rank, using the <a href="https://github.com/cp2k/cp2k/blob/master/benchmarks/QS/H2O-256.inp">CP2K H2O-256 benchmark</a>
as an example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1">#SBATCH -J H2O</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="c1">#SBATCH -N 4</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1">#SBATCH --partition=small</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="c1">#SBATCH -t 00:10:00</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c1">#SBATCH --mem=200G</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1">#SBATCH --exclusive --no-requeue</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="c1">#SBATCH -A project_46YXXXXXX</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="c1">#SBATCH --ntasks-per-node=64</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="c1">#SBATCH -c 2</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_PLACES</span><span class="o">=</span>cores
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_PROC_BIND</span><span class="o">=</span>close
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="si">${</span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="si">}</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>module<span class="w"> </span>load<span class="w"> </span>LUMI/25.03
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>module<span class="w"> </span>load<span class="w"> </span>partition/C
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>module<span class="w"> </span>load<span class="w"> </span>CP2K/2024.3-cpeGNU-25.03-CPU
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>srun<span class="w"> </span>cp2k.psmp<span class="w"> </span>-i<span class="w"> </span>H2O-256.inp<span class="w"> </span>-o<span class="w"> </span>H2O-256.out
</code></pre></div>
<p>Running on LUMI-G requires careful process binding to CPU and GPUs. Here, we 
run a batch job on 4 LUMI-G compute nodes with 8 MPI ranks (1 per GPU) and 6 
OpenMP threads per rank. Below an example using the 
<a href="https://github.com/cp2k/cp2k/blob/master/benchmarks/QS_DM_LS/H2O-dft-ls.inp"><code>H2O-dft-ls.inp</code> file</a> from the
<a href="https://github.com/cp2k/cp2k/tree/master/benchmarks/QS_DM_LS">CP2K "Quickstep Density Matrix Linear Scaling" benchmark</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1">#SBATCH -J lsdft</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1">#SBATCH -p standard-g</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1">#SBATCH -A project_46YXXXXXX</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1">#SBATCH --time=00:30:00</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1">#SBATCH --nodes=4</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1">#SBATCH --gres=gpu:8</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_PLACES</span><span class="o">=</span>cores
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_PROC_BIND</span><span class="o">=</span>close
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="si">${</span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="si">}</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="nb">ulimit</span><span class="w"> </span>-s<span class="w"> </span>unlimited
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_STACKSIZE</span><span class="o">=</span>512M
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="nb">export</span><span class="w"> </span><span class="nv">MPICH_OFI_NIC_POLICY</span><span class="o">=</span>GPU
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="nb">export</span><span class="w"> </span><span class="nv">MPICH_GPU_SUPPORT_ENABLED</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>module<span class="w"> </span>load<span class="w"> </span>LUMI/25.03
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>module<span class="w"> </span>load<span class="w"> </span>partition/G
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>module<span class="w"> </span>load<span class="w"> </span>CP2K/2025.2-cpeGNU-25.03-rocm
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>srun<span class="w"> </span>--nodes<span class="o">=</span><span class="m">4</span><span class="w"> </span>--ntasks<span class="o">=</span><span class="m">32</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">     </span>--cpu-bind<span class="o">=</span>mask_cpu:7e000000000000,7e00000000000000,7e0000,7e000000,7e,7e00,7e00000000,7e0000000000<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">     </span>./select_gpu.sh<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">     </span>cp2k.psmp<span class="w"> </span>-i<span class="w"> </span>H2O-dft-ls.inp<span class="w"> </span>-o<span class="w"> </span>H2O-dft-ls.out
</code></pre></div>
<p>The <code>select_gpu.sh</code> helper script is useful to get the GPU to CPU binding correct on LUMI.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$<span class="w"> </span>cat<span class="w"> </span>select_gpu.sh<span class="w"> </span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1">#!/bin/bash</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ROCR_VISIBLE_DEVICES</span><span class="o">=</span><span class="nv">$SLURM_LOCALID</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nb">exec</span><span class="w"> </span><span class="nv">$*</span>
</code></pre></div>
<p>Since the January 2026 system update, a simpler trick using <code>--cpu-bind</code> and <code>--gpu-bind</code> also works:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">#SBATCH -J lsdft</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1">#SBATCH -p standard-g</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1">#SBATCH -A project_46YXXXXXX</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1">#SBATCH --time=00:30:00</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1">#SBATCH --nodes=4</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1">#SBATCH --gres=gpu:8</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_PLACES</span><span class="o">=</span>cores
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_PROC_BIND</span><span class="o">=</span>close
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="si">${</span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="si">}</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="nb">ulimit</span><span class="w"> </span>-s<span class="w"> </span>unlimited
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OMP_STACKSIZE</span><span class="o">=</span>512M
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="nb">export</span><span class="w"> </span><span class="nv">MPICH_OFI_NIC_POLICY</span><span class="o">=</span>GPU
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="nb">export</span><span class="w"> </span><span class="nv">MPICH_GPU_SUPPORT_ENABLED</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>module<span class="w"> </span>load<span class="w"> </span>LUMI/25.03
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>module<span class="w"> </span>load<span class="w"> </span>partition/G
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>module<span class="w"> </span>load<span class="w"> </span>CP2K/2025.2-cpeGNU-25.03-rocm
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>srun<span class="w"> </span>--nodes<span class="o">=</span><span class="m">4</span><span class="w"> </span>--ntasks<span class="o">=</span><span class="m">32</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">     </span>--cpu-bind<span class="o">=</span>mask_cpu:7e,7e00,7e0000,7e000000,7e00000000,7e0000000000,7e000000000000,7e00000000000000<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">     </span>--gpu-bind<span class="o">=</span>map:4,5,2,3,6,7,0,1<span class="w"> </span>--gres-flags<span class="o">=</span>allow-task-sharing<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">     </span>cp2k.psmp<span class="w"> </span>-i<span class="w"> </span>H2O-dft-ls.inp<span class="w"> </span>-o<span class="w"> </span>H2O-dft-ls.out
</code></pre></div>
<p>In the latter variant, we use a linear assignment of the CCDs, using 6 cores per CCD, and then map each to
the appropriate GCD with <code>--gpu-bind</code>. The option <code>--gres-flags=allow-task-sharing</code> is essential though as
otherwise intra-node communication does not work.</p>
<p>This script is useful for many applications using GPU on LUMI, not only CP2K.</p>
<h3 id="tuning-recommendations">Tuning recommendations</h3>
<ul>
<li>
<p>In general, try to use parallelization using both MPI and OpenMP. Use at least
    <code>OMP_NUM_THREADS=2</code>, and when running larger jobs (say more than 16 compute
    nodes), it often faster with <code>OMP_NUM_THREADS=4/8</code>.</p>
</li>
<li>
<p>When running on LUMI-G, run using 8 MPI ranks per compute node, where each
    rank has access to 1 GPU in the same NUMA zone. This also means that you have
    to <code>OMP_NUM_THREADS=6-7</code> to utilize all CPU cores. Please note that using all
    64 cores will not work as the first core in each CCD is reserved for the
    operating system, so that only 56 cores are available.</p>
</li>
</ul>
<h2 id="user-installable-modules-and-easyconfigs">User-installable modules (and EasyConfigs)</h2>
<p>Install with the EasyBuild-user module:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>eb &lt;easyconfig&gt; -r
</code></pre></div>
To access module help after installation and get reminded for which stacks and partitions the module is
installed, use <code>module spider CP2K/&lt;version&gt;</code>.</p>
<p>EasyConfig:</p>
<ul>
<li>
<p><a href="CP2K-2024.1-cpeGNU-23.09-rocm/">EasyConfig CP2K-2024.1-cpeGNU-23.09-rocm.eb, will build CP2K/2024.1-cpeGNU-23.09-rocm</a></p>
<p>CP2K 2024.1 release compiled with AMD GPU support enabled for CP2K 
itself and several of the libraries (SpFFT, SpLA). Cray Programming 
Environment 23.09.</p>
</li>
<li>
<p><a href="CP2K-2024.2-cpeGNU-24.03-CPU/">EasyConfig CP2K-2024.2-cpeGNU-24.03-CPU.eb, will build CP2K/2024.2-cpeGNU-24.03-CPU</a></p>
<p>CP2K 2024.2 release compiled for CPU with PLUMED.</p>
<p>Switched to PLUMED 2.9.3 in February 2025 after reports of problems with 2.9.2.</p>
</li>
<li>
<p><a href="CP2K-2024.2-cpeGNU-24.03-libcp2k-CPU/">EasyConfig CP2K-2024.2-cpeGNU-24.03-libcp2k-CPU.eb, will build CP2K/2024.2-cpeGNU-24.03-libcp2k-CPU</a></p>
<p>CP2K 2024.2 release compiled for CPU with PLUMED and also generating the
libcp2k library.</p>
<p>Switched to PLUMED 2.9.3 in February 2025 after reports of problems with 2.9.2.</p>
</li>
<li>
<p><a href="CP2K-2024.2-cpeGNU-24.03-rocm/">EasyConfig CP2K-2024.2-cpeGNU-24.03-rocm.eb, will build CP2K/2024.2-cpeGNU-24.03-rocm</a></p>
<p>CP2K 2024.1 release compiled with AMD GPU support enabled for CP2K 
itself and several of the libraries (SpFFT, SpLA). Cray Programming 
Environment 23.09.</p>
</li>
<li>
<p><a href="CP2K-2024.3-cpeGNU-25.03-CPU/">EasyConfig CP2K-2024.3-cpeGNU-25.03-CPU.eb, will build CP2K/2024.3-cpeGNU-25.03-CPU</a></p>
<p>CP2K 2024.3 release compiled for CPU with PLUMED.</p>
</li>
<li>
<p><a href="CP2K-2025.2-cpeGNU-25.03-rocm/">EasyConfig CP2K-2025.2-cpeGNU-25.03-rocm.eb, will build CP2K/2025.2-cpeGNU-25.03-rocm</a></p>
<p>CP2K 2024.1 release compiled with AMD GPU support enabled for CP2K 
itself and several of the libraries (SpFFT, SpLA). Cray Programming 
Environment 23.09.</p>
</li>
</ul>
<h2 id="technical-documentation">Technical documentation</h2>
<ul>
<li>
<p><a href="https://www.cp2k.org/">CP2K web site</a></p>
</li>
<li>
<p><a href="https://github.com/cp2k/cp2k">CP2K on GitHub</a></p>
<ul>
<li><a href="https://github.com/cp2k/cp2k/releases">GitHub releases</a></li>
</ul>
</li>
</ul>
<h3 id="easybuild">EasyBuild</h3>
<ul>
<li>
<p><a href="https://github.com/eth-cscs/production/tree/master/easybuild/easyconfigs/c/CP2K">CP2K in the CSCS repository</a></p>
</li>
<li>
<p><a href="https://github.com/easybuilders/easybuild-easyconfigs/tree/develop/easybuild/easyconfigs/c/CP2K">CP2K in the EasyBuilders repository</a></p>
</li>
</ul>
<h4 id="brief-descriptions-of-archived-easyconfigs-up-to-2309">Brief descriptions of archived EasyConfigs (up to 23.09)</h4>
<ul>
<li>
<p><code>CP2K-9.1-cpeGNU-21.08.eb</code>: The EasyConfig file is a direct port of the CSCS one.</p>
</li>
<li>
<p><code>CP2K-9.1-cpeGNU-21.12.eb</code>: Same as above, but compiled with Cray Programming Environment 21.12. 
    No signficiant performance difference observed. Links to a newer ELPA version (2021.11.001).</p>
</li>
<li>
<p><code>CP2K-2022.1-cpeGNU-22.08.eb</code>: CP2K 2022.1 released compiled with Cray Programming Environment 22.08, 
    built with PLUMED 2.8.0, Libxc 5.2.2, and Libvori 220621.</p>
</li>
<li>
<p><code>CP2K-2023.1-cpeGNU-22.08-GPU.eb</code>: CP2K 2023.1 release compiled with AMD GPU support enabled for CP2K 
    itself and several of the libraries (SpFFT, SpLA). Cray Programming Environment 22.08 used together with 
    the unsupported <code>rocm/5.3.3</code> module installed by the LUMI Support Team, as CP2K requires at ROCm 5.3.3.</p>
</li>
<li>
<p><code>CP2K-2023.1-cpeGNU-22.12-CPU.eb</code>: A CPU-only build of CP2K release 2023.1 compiled with the GNU compilers
    and with support for PLUMED.</p>
</li>
<li>
<p><code>CP2K-2023.2-cpeGNU-22.12-CPU.eb</code>: A CPU-only build of CP2K release 2023.2 compiled with the GNU compilers
    and with support for PLUMED.</p>
</li>
<li>
<p><code>CP2K-2024.1-cpeGNU-23.09-GPU.eb</code>: CP2K 2024.1 release compiled with AMD GPU support enabled for CP2K 
    itself and several of the libraries (SpFFT, SpLA). Cray Programming Environment 23.09 used together with 
    the unsupported <code>rocm/5.6.1</code> module installed by the LUMI Support Team.</p>
</li>
</ul>
<h4 id="version-20242-with-libcp2k">Version 2024.2 with libcp2k</h4>
<ul>
<li>
<p>Build instructions in the CP2K manual</p>
<p>It turns out that one needs to build this option after doing the regular build,
and <code>make all libcp2k</code> to do it in a single step, cannot be done. Since a two-phase
build is no option either as the second build starts clean, the solution is to play
with buildopts and add the second make command as
<code>&amp;&amp; make ARCH=LUMIC-20242 VERSION={local_buildtype} libcp2k</code>.</p>
</li>
<li>
<p>The <code>libcp2k.pc</code> file is completely broken. CP2K does not have a proper <code>make install</code>
    script but really assumes an in-place build. Hence all directories set in the .pc file
    are wrong and refer to the EasyBuild build directory. The <code>Libs:</code> field is completely 
    off and contains even compiler options and not just options for the linker.</p>
<p>We've tried to fix this through edits of the <code>libcp2k.pc</code> file. However, if the list of
dependencies changes, this bit of code in <code>postinstallcmds</code> will have to be checked again.</p>
</li>
</ul>
<p><strong>TODO</strong>: It likely does no harm to simply always include the <code>libcp2k</code> library rather than
having two EasyConfigs, one with and one without, so we may simply integrate the support for
future toolchains.</p>
<h4 id="version-20243-for-2503">Version 2024.3 for 25.03</h4>
<ul>
<li>
<p>Dependency check in the code of CP2K:</p>
<ul>
<li>
<p><a href="https://github.com/cp2k/cp2k/tree/v2024.3/tools/toolchain/scripts/stage3">stage 3</a></p>
<div class="highlight"><pre><span></span><code>-   [Libint 2.6.0](https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage3/install_libint.sh#L15).
    We&#39;ve used Libint 2.7.2 (regular release) before so will stick to that one for now.
    The decision to switch to 2.7.2 in an earlier version of the EasyConfigs was likely taken
    because that was also used in the EasyBuilders repository for an already older version of 
    CP2K.
</code></pre></div>
<ul>
<li>It was tested with <a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage3/install_libxc.sh#L9">libxc 6.2.2</a>.
    Given that there were some breaking changes in 7.0.0, it is better to stick to 6.2.2
    for this version.</li>
</ul>
</li>
<li>
<p><a href="https://github.com/cp2k/cp2k/tree/v2024.3/tools/toolchain/scripts/stage4">Stage 4</a></p>
<ul>
<li>
<p><a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage4/install_cosma.sh#L9">COSMA 2.6.6</a>
    is the preferred version. COSMA 2.7.0 was available when this EasyConfig 
    was developed, but we stock to the last 2.6 version to be on the safe side.</p>
</li>
<li>
<p><a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage3/install_libxc.sh#L9">libxsmm 1.17</a>
    should be OK.</p>
</li>
</ul>
</li>
<li>
<p><a href="https://github.com/cp2k/cp2k/tree/v2024.3/tools/toolchain/scripts/stage5">Stage 5</a></p>
<div class="highlight"><pre><span></span><code>-   The version was tested by the developers with [ELPA 2024.03.001](https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage5/install_elpa.sh#L10).
    We&#39;ve used 2024.05.001 before with users not reporting problems so stick to that one.
</code></pre></div>
</li>
<li>
<p><a href="https://github.com/cp2k/cp2k/tree/v2024.3/tools/toolchain/scripts/stage6">Stage 6</a></p>
<ul>
<li>
<p><a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage6/install_gsl.sh#L9">GSL 2.7</a>
    but we stick to 2.8 as we did not get any reported issues before.</p>
</li>
<li>
<p>Tested with <a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage6/install_plumed.sh#L9">PLUMED 2.9.0</a>
    but we stick to the bugfix release 2.9.4.</p>
</li>
</ul>
</li>
<li>
<p><a href="https://github.com/cp2k/cp2k/tree/v2024.3/tools/toolchain/scripts/stage7">Stage 7</a></p>
<ul>
<li>
<p>Tested with <a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage7/install_libvori.sh#L10">libvori 220621</a>.</p>
</li>
<li>
<p>Tested with <a href="https://github.com/cp2k/cp2k/blob/v2024.3/tools/toolchain/scripts/stage7/install_spglib.sh#L8">spglib 2.3.1</a>.
    CP2K seems to be slow upgrading that one. We build with 2.6.0 but consider reverting to 
    2.3.1 is users report issues. the ChangeLog of spglib also does not mention anything too scary.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Otherwise a rather trivial port of the corresponding 2024.2 versions for LUMI/24.03.   </p>
</li>
</ul>
<h4 id="version-20252-for-2503-gpu">Version 2025.2 for 25.03 GPU</h4>
<ul>
<li>
<p>DBCSR - a dependency that is shipped with CP2K - contains code that is not compatible with newer versions of rocm so this has been patched in CP2K-2025.2-rocm-dbcsr.patch to enable compilation of CP2K for GPU.</p>
</li>
<li>
<p>A few updates to the PSMP-file concerning flags.</p>
</li>
<li>
<p>Otherwise a trivial port of the corresponding 2024.2 version for LUMI/24.03</p>
</li>
</ul>
<h2 id="archived-easyconfigs">Archived EasyConfigs</h2>
<p>The EasyConfigs below are additional easyconfigs that are not directly available
on the system for installation. Users are advised to use the newer ones and these
archived ones are unsupported. They are still provided as a source of information
should you need this, e.g., to understand the configuration that was used for
earlier work on the system.</p>
<ul>
<li>
<p>Archived EasyConfigs from <a href="https://github.com/lumi-supercomputer/LUMI-EasyBuild-contrib/blob/main/easybuild/easyconfigs/__archive__/c/CP2K">LUMI-EasyBuild-contrib</a> - previously user-installable software</p>
<ul>
<li>
<p><a href="CP2K-2022.1-cpeGNU-22.08/">EasyConfig CP2K-2022.1-cpeGNU-22.08.eb, with module CP2K/2022.1-cpeGNU-22.08</a></p>
</li>
<li>
<p><a href="CP2K-2023.1-cpeGNU-22.08-GPU/">EasyConfig CP2K-2023.1-cpeGNU-22.08-GPU.eb, with module CP2K/2023.1-cpeGNU-22.08-GPU</a></p>
</li>
<li>
<p><a href="CP2K-2023.1-cpeGNU-22.12-CPU/">EasyConfig CP2K-2023.1-cpeGNU-22.12-CPU.eb, with module CP2K/2023.1-cpeGNU-22.12-CPU</a></p>
</li>
<li>
<p><a href="CP2K-2023.2-cpeGNU-22.12-CPU/">EasyConfig CP2K-2023.2-cpeGNU-22.12-CPU.eb, with module CP2K/2023.2-cpeGNU-22.12-CPU</a></p>
</li>
<li>
<p><a href="CP2K-9.1-cpeGNU-21.08/">EasyConfig CP2K-9.1-cpeGNU-21.08.eb, with module CP2K/9.1-cpeGNU-21.08</a></p>
</li>
<li>
<p><a href="CP2K-9.1-cpeGNU-21.12/">EasyConfig CP2K-9.1-cpeGNU-21.12.eb, with module CP2K/9.1-cpeGNU-21.12</a></p>
</li>
</ul>
</li>
</ul>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        




<footer class="md-footer">

  
  

  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      
    <div class="md-footer-copyright">
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" 
             style="border-width:0" 
             src="https://i.creativecommons.org/l/by/4.0/80x15.png"
        />
      </a>
      This work is licensed under a&nbsp;
      <a rel="license" 
         href="http://creativecommons.org/licenses/by/4.0/"
      >
        Creative Commons Attribution 4.0 International License
      </a>
    </div>

      
      
<div class="md-social">
  
    
    
    
    
    <a href="https://www.youtube.com/channel/UCb31KOJ6Wqu0sRpIRi_k8Mw" target="_blank" rel="noopener" title="LUMI on YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/lumi-supercomputer" target="_blank" rel="noopener" title="LUMI on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/LUMIhpc" target="_blank" rel="noopener" title="LUMI on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "toc.follow", "search.suggest", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>